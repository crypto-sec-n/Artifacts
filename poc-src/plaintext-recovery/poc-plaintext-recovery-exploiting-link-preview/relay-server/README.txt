How to run server

1. Unzip relay server code
```
unzip nostream-with-nginx.zip
```

2. Install minca.pem on testing iOS device or replace pem and key files on nginx/conf/certs

3. if you would like to change resolution between ip and domain, you can modify dns settings on ../dns-server/dnsmasq/dnsmasq.d/hosts


4. Run DNS server
```
cd ../dns-server/dnsmasq
docker compose up
```

5. Set host pc's ip address as DNS server to your testing iOS device.
- If you use physical iOS device, you can find settings on Settings->Wifi->(i) icon on connected SSID->DNS server settings
- If you use iOS simulator, you should modify DNS settings on macOS.

5. if you would like to change the routing for each domain, you can modify nginx conf on ./nostream/conf.d/default.conf
By default, requests to https://mu.test/ are forwarded to port 8000 on the host machine.
Similarly, requests to shared.test are forwarded to port 8001.

6. run server
```
docker compose up
```
